{% extends 'index.html' %}

{% block title %}Reporte de Actos Litúrgicos{% endblock %}

{% block cuerpo %}
<div class="container-fluid mt-5"> <!-- Se aumentó el margen superior -->
    <h1 class="titulo-gestion mb-4 text-center">Reporte de Celebraciones por Actos Litúrgicos</h1>
    <div class="card">
        <div class="card-header">
            <div class="row g-3 align-items-center"> <!-- g-3 aumenta el espacio entre elementos -->
                <!-- Filtro de Año -->
                <div class="col-6 d-flex align-items-center">
                    <label for="yearFilter" class="form-label me-2 mb-0"><strong>Año:</strong></label>
                    <select id="yearFilter" class="form-select form-select-sm" aria-label="Filtrar por año">
                        <option value="">Seleccione un año</option>
                        {% for year in años %}
                            <option value="{{ year }}">{{ year }}</option>
                        {% endfor %}
                    </select>
                </div>
                <!-- Filtro de Tipo de Acto Litúrgico -->
                <div class="col-5 d-flex align-items-center">
                    <label for="actoFilter" class="form-label me-2 mb-0"><strong>Acto litúrgico:</strong></label>
                    <select id="actoFilter" class="form-select form-select-sm" aria-label="Filtrar por tipo de acto litúrgico">
                        <option value="">Todos</option>
                        {% for acto in actos %}
                            <option value="{{ acto['nombre_acto'] }}">{{ acto['nombre_acto'] }}</option>
                        {% endfor %}
                    </select>
                </div>
            </div>
        </div>
        <div class="card-body">
            <!-- Mensaje cuando no hay datos -->
            <div id="noDataMessage" class="alert alert-info text-center" style="display: none;">
                No hay datos disponibles para los filtros seleccionados. Se muestra un gráfico vacío.
            </div>
            <!-- Contenedor del gráfico -->
            <div id="chartContainer" class="chart-container" style="position: relative; height:400px; width:100%">
                <canvas id="actosLiturgicosChart"></canvas>
            </div>
        </div>
    </div>
</div>

<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<script src="/static/js/numeroActosLiturgicosAño.js"></script>

<style>
    /* Ajusta el espaciado general */
    body {
        overflow-y: auto;
    }

    .container-fluid {
        max-width: 95%; /* Ajusta el ancho máximo */
    }

    .titulo-gestion {
        font-size: 1.8rem; /* Tamaño de letra del título */
        font-weight: bold;
    }

    .card {
        border-radius: 10px; /* Bordes redondeados */
        box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1); /* Añade una sombra ligera */
    }

    .card-header {
        background-color: #f8f9fa; /* Color de fondo claro para la cabecera */
        padding: 1rem; /* Espaciado interno */
    }

    .form-label {
        font-size: 0.9rem; /* Ajusta el tamaño del texto de las etiquetas */
    }

    .form-select {
        min-width: 180px; /* Ancho mínimo para los select */
    }

    .chart-container {
        position: relative;
        height: 400px;
        width: 100%;
    }

    .row.g-3 > [class*="col-"] {
        padding-right: 0.5rem;
        padding-left: 0.5rem;
    }
</style>
{% endblock %}
